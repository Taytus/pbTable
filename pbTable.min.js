!function(t){function e(t){for(var e="ÃÀÁÄÂÈÉËÊÌÍÏÎÒÓÖÔÙÚÜÛãàáäâèéëêìíïîòóöôùúüûÑñÇç",r="AAAAAEEEEIIIIOOOOUUUUaaaaaeeeeiiiioooouuuunncc",o=0;o<e.length;o++)t=t.replace(e.charAt(o),r.charAt(o));return t}function r(e,r){void 0!=r&&e.val(r);var o=e.attr("search-in");""===e.val()?t("#"+o+" tbody>tr").show():(t("#"+o+" tbody>tr").hide(),t("#"+o+" td:contains-ci('"+e.val()+"')").parent("tr").show())}function o(e,r){t("#"+e.attr("id")+'-pbToolbar div[name="sectionForButtons"]').append("&nbsp;"+r)}function n(){function t(r,o,n){if(r.addEventListener)r.addEventListener(o,n,!1);else{n.$$guid||(n.$$guid=t.guid++),r.events||(r.events={});var a=r.events[o];a||(a=r.events[o]={},r["on"+o]&&(a[0]=r["on"+o])),a[n.$$guid]=n,r["on"+o]=e}}function e(t){var e=!0;t=t||r(((this.ownerDocument||this.document||this).parentWindow||window).event);var o=this.events[t.type];for(var n in o)this.$$handleEvent=o[n],this.$$handleEvent(t)===!1&&(e=!1);return e}function r(t){return t.preventDefault=r.preventDefault,t.stopPropagation=r.stopPropagation,t}var o=!1;if(sorttable={init:function(){arguments.callee.done||(arguments.callee.done=!0,n&&clearInterval(n),document.createElement&&document.getElementsByTagName&&(sorttable.DATE_RE=/^(\d\d?)[\/\.-](\d\d?)[\/\.-]((\d\d)?\d\d)$/,a(document.getElementsByTagName("table"),function(t){-1!=t.className.search(/\bsortable\b/)&&sorttable.makeSortable(t)})))},makeSortable:function(e){if(0==e.getElementsByTagName("thead").length&&(the=document.createElement("thead"),the.appendChild(e.rows[0]),e.insertBefore(the,e.firstChild)),null==e.tHead&&(e.tHead=e.getElementsByTagName("thead")[0]),1==e.tHead.rows.length){sortbottomrows=[];for(var r=0;r<e.rows.length;r++)-1!=e.rows[r].className.search(/\bsortbottom\b/)&&(sortbottomrows[sortbottomrows.length]=e.rows[r]);if(sortbottomrows){null==e.tFoot&&(tfo=document.createElement("tfoot"),e.appendChild(tfo));for(var r=0;r<sortbottomrows.length;r++)tfo.appendChild(sortbottomrows[r]);delete sortbottomrows}headrow=e.tHead.rows[0].cells;for(var r=0;r<headrow.length;r++)headrow[r].className.match(/\bsorttable_nosort\b/)||(mtch=headrow[r].className.match(/\bsorttable_([a-z0-9]+)\b/),mtch&&(override=mtch[1]),headrow[r].sorttable_sortfunction=mtch&&"function"==typeof sorttable["sort_"+override]?sorttable["sort_"+override]:sorttable.guessType(e,r),headrow[r].sorttable_columnindex=r,headrow[r].sorttable_tbody=e.tBodies[0],t(headrow[r],"click",sorttable.innerSortFunction=function(){if(-1!=this.className.search(/\bsorttable_sorted\b/))return sorttable.reverse(this.sorttable_tbody),this.className=this.className.replace("sorttable_sorted","sorttable_sorted_reverse"),this.removeChild(document.getElementById("sorttable_sortfwdind")),sortrevind=document.createElement("span"),sortrevind.id="sorttable_sortrevind",sortrevind.innerHTML=o?'&nbsp<font face="webdings">5</font>':"&nbsp;&#x25B4;",void this.appendChild(sortrevind);if(-1!=this.className.search(/\bsorttable_sorted_reverse\b/))return sorttable.reverse(this.sorttable_tbody),this.className=this.className.replace("sorttable_sorted_reverse","sorttable_sorted"),this.removeChild(document.getElementById("sorttable_sortrevind")),sortfwdind=document.createElement("span"),sortfwdind.id="sorttable_sortfwdind",sortfwdind.innerHTML=o?'&nbsp<font face="webdings">6</font>':"&nbsp;&#x25BE;",void this.appendChild(sortfwdind);theadrow=this.parentNode,a(theadrow.childNodes,function(t){1==t.nodeType&&(t.className=t.className.replace("sorttable_sorted_reverse",""),t.className=t.className.replace("sorttable_sorted",""))}),sortfwdind=document.getElementById("sorttable_sortfwdind"),sortfwdind&&sortfwdind.parentNode.removeChild(sortfwdind),sortrevind=document.getElementById("sorttable_sortrevind"),sortrevind&&sortrevind.parentNode.removeChild(sortrevind),this.className+=" sorttable_sorted",sortfwdind=document.createElement("span"),sortfwdind.id="sorttable_sortfwdind",sortfwdind.innerHTML=o?'&nbsp<font face="webdings">6</font>':"&nbsp;&#x25BE;",this.appendChild(sortfwdind),row_array=[],col=this.sorttable_columnindex,rows=this.sorttable_tbody.rows;for(var t=0;t<rows.length;t++)row_array[row_array.length]=[sorttable.getInnerText(rows[t].cells[col]),rows[t]];row_array.sort(this.sorttable_sortfunction),tb=this.sorttable_tbody;for(var t=0;t<row_array.length;t++)tb.appendChild(row_array[t][1]);delete row_array}))}},guessType:function(t,e){sortfn=sorttable.sort_alpha;for(var r=0;r<t.tBodies[0].rows.length;r++)if(text=sorttable.getInnerText(t.tBodies[0].rows[r].cells[e]),""!=text){if(text.match(/^-?[£$¤]?[\d,.]+%?$/))return sorttable.sort_numeric;if(possdate=text.match(sorttable.DATE_RE)){if(first=parseInt(possdate[1]),second=parseInt(possdate[2]),first>12)return sorttable.sort_ddmm;if(second>12)return sorttable.sort_mmdd;sortfn=sorttable.sort_ddmm}}return sortfn},getInnerText:function(t){if(!t)return"";if(hasInputs="function"==typeof t.getElementsByTagName&&t.getElementsByTagName("input").length,null!=t.getAttribute("sorttable_customkey"))return t.getAttribute("sorttable_customkey");if("undefined"!=typeof t.textContent&&!hasInputs)return t.textContent.replace(/^\s+|\s+$/g,"");if("undefined"!=typeof t.innerText&&!hasInputs)return t.innerText.replace(/^\s+|\s+$/g,"");if("undefined"!=typeof t.text&&!hasInputs)return t.text.replace(/^\s+|\s+$/g,"");switch(t.nodeType){case 3:if("input"==t.nodeName.toLowerCase())return t.value.replace(/^\s+|\s+$/g,"");case 4:return t.nodeValue.replace(/^\s+|\s+$/g,"");case 1:case 11:for(var e="",r=0;r<t.childNodes.length;r++)e+=sorttable.getInnerText(t.childNodes[r]);return e.replace(/^\s+|\s+$/g,"");default:return""}},reverse:function(t){newrows=[];for(var e=0;e<t.rows.length;e++)newrows[newrows.length]=t.rows[e];for(var e=newrows.length-1;e>=0;e--)t.appendChild(newrows[e]);delete newrows},sort_numeric:function(t,e){return aa=parseFloat(t[0].replace(/[^0-9.-]/g,"")),isNaN(aa)&&(aa=0),bb=parseFloat(e[0].replace(/[^0-9.-]/g,"")),isNaN(bb)&&(bb=0),aa-bb},sort_alpha:function(t,e){return t[0]==e[0]?0:t[0]<e[0]?-1:1},sort_ddmm:function(t,e){return mtch=t[0].match(sorttable.DATE_RE),y=mtch[3],m=mtch[2],d=mtch[1],1==m.length&&(m="0"+m),1==d.length&&(d="0"+d),dt1=y+m+d,mtch=e[0].match(sorttable.DATE_RE),y=mtch[3],m=mtch[2],d=mtch[1],1==m.length&&(m="0"+m),1==d.length&&(d="0"+d),dt2=y+m+d,dt1==dt2?0:dt2>dt1?-1:1},sort_mmdd:function(t,e){return mtch=t[0].match(sorttable.DATE_RE),y=mtch[3],d=mtch[2],m=mtch[1],1==m.length&&(m="0"+m),1==d.length&&(d="0"+d),dt1=y+m+d,mtch=e[0].match(sorttable.DATE_RE),y=mtch[3],d=mtch[2],m=mtch[1],1==m.length&&(m="0"+m),1==d.length&&(d="0"+d),dt2=y+m+d,dt1==dt2?0:dt2>dt1?-1:1},shaker_sort:function(t,e){for(var r=0,o=t.length-1,n=!0;n;){n=!1;for(var a=r;o>a;++a)if(e(t[a],t[a+1])>0){var s=t[a];t[a]=t[a+1],t[a+1]=s,n=!0}if(o--,!n)break;for(var a=o;a>r;--a)if(e(t[a],t[a-1])<0){var s=t[a];t[a]=t[a-1],t[a-1]=s,n=!0}r++}}},document.addEventListener&&document.addEventListener("DOMContentLoaded",sorttable.init,!1),/WebKit/i.test(navigator.userAgent))var n=setInterval(function(){/loaded|complete/.test(document.readyState)&&sorttable.init()},10);window.onload=sorttable.init,t.guid=1,r.preventDefault=function(){this.returnValue=!1},r.stopPropagation=function(){this.cancelBubble=!0},Array.forEach||(Array.forEach=function(t,e,r){for(var o=0;o<t.length;o++)e.call(r,t[o],o,t)}),Function.prototype.forEach=function(t,e,r){for(var o in t)"undefined"==typeof this.prototype[o]&&e.call(r,t[o],o,t)},String.forEach=function(t,e,r){Array.forEach(t.split(""),function(o,n){e.call(r,o,n,t)})};var a=function(t,e,r){if(t){var o=Object;if(t instanceof Function)o=Function;else{if(t.forEach instanceof Function)return void t.forEach(e,r);"string"==typeof t?o=String:"number"==typeof t.length&&(o=Array)}o.forEach(t,e,r)}}}t.fn.pbTable=function(e){function a(){h.onView.call(this)}function s(){h.onEdit.call(this)}function i(){h.onDelete.call(this)}function d(){h.onNew.call(this)}function l(){h.onPrint.call(this)}function c(){h.onReceipt.call(this)}var b={selectable:!0,sortable:!0,toolbar:{enabled:!0,filterBox:!0,tags:[{display:"Todos",toSearch:""}],buttons:["view","edit","delete","new","print","receipt"]}},h=jQuery.extend(!0,b,e),u=t(this),f='<input id="search-'+u.attr("id")+'" search-in="'+u.attr("id")+'" type="search" class="form-control" placeholder="Buscar...">',m='<button id="btn-View" class="btn btn-success">Ver</button>',p='<button id="btn-Edit" class="btn btn-warning">Editar</button>',v='<button id="btn-Delete" class="btn btn-danger">Eliminar</button>',g='<button id="btn-New" class="btn btn-primary">Nuevo</button>',w='<button id="btn-Print" class="btn btn-primary">Print</button>',y='<button id="btn-Receipt" class="btn btn-primary">Recibo</button>',_='<div id="'+u.attr("id")+'-pbToolbar" class="row">';_+='<div name="sectionForSearchBox" class="col-lg-3"></div>',_+='<div name="sectionForTags" class="col-lg-4"></div>',_+='<div name="sectionForButtons" class="col-lg-5 text-right"></div>',_+="</div>",h.selectable&&(t(this).children("tbody").css("cursor","pointer"),t(this).children("tbody").children("tr").on("click",function(){if(t(this).hasClass("warning"))var e=1;u.children("tbody").children("tr").removeClass("warning"),1!=e&&t(this).addClass("warning")})),h.sortable&&(u.addClass("sortable"),t("#"+u.attr("id")+" thead").css("cursor","pointer"),n()),h.toolbar.enabled&&(u.before(_),h.toolbar.filterBox&&t("#"+u.attr("id")+'-pbToolbar div[name="sectionForSearchBox"]').append(f),h.toolbar.tags.length>0&&h.toolbar.filterBox&&(void 0!==e.toolbar&&void 0!==e.toolbar.tags&&(h.toolbar.tags=e.toolbar.tags),h.toolbar.tags.forEach(function(e){t("#"+u.attr("id")+'-pbToolbar div[name="sectionForTags"]').append('<button name="pbButtonTag" class="btn btn-link" input-search="search-'+u.attr("id")+'" toSearch="'+e.toSearch+'">'+e.display+"</button>")}),t('button[name="pbButtonTag"]').click(function(){var e=t("#"+t(this).attr("input-search")),o=t(this).attr("toSearch");r(e,o)})),h.toolbar.buttons.length>0&&h.toolbar.filterBox&&(void 0!==e.toolbar&&void 0!==e.toolbar.buttons&&(h.toolbar.buttons=e.toolbar.buttons),h.toolbar.buttons.forEach(function(e){switch(e){case"view":o(u,m),t("#btn-View").bind("click",a);break;case"edit":o(u,p),t("#btn-Edit").bind("click",s);break;case"delete":o(u,v),t("#btn-Delete").bind("click",i);break;case"new":o(u,g),t("#btn-New").bind("click",d);break;case"print":o(u,w),t("#btn-Print").bind("click",l);break;case"receipt":o(u,y),t("#btn-Receipt").bind("click",c)}})),t("input[search-in]").keyup(function(){r(t(this))}))},t.extend(t.expr[":"],{"contains-ci":function(r,o,n){return n[3]=e(n[3]),(e(r.innerHTML)||r.textContent||r.innerText||t(r).text()||"").toLowerCase().indexOf((n[3]||"").toLowerCase())>=0}})}(jQuery);